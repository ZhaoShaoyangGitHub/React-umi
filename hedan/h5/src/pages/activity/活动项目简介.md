# 玩具守护者活动项目结构介绍

目录： `src/pages/activity/`

原本 `activity` 目录是打算放置各种活动的，现在 `activity` 目录专指玩具守护者这一个活动 ， 如有其它与该活动活动无关活动请单开目录

根据 `src/utils/RouterView` 设计规则，目录即路由即页面地址

详情参见 `src/pages/routes.ts`

活动根目录为 `src/pages/activity/` 下文以 `activity` 指代

## 玩具守护者活动开发和发布模式简介

### 概念：

- 本期活动
  - 指以当前生产环境正在进行的，以 `activity` 为根目录的代码主要运行的活动
- 下期活动
  - 指下期将要进行的，以 `activity/next_active` 为根目录的代码主要运行的活动

本期活动与下期活动判断依据：

参见项目接口文档 `/api/activity/next`

其中 `res.data.isJump` 返回 `true` 则表示切换为切换为下期活动，否则为本期活动

### 本期活动目录结构：

- draw
  - 抽奖页面
- guardians
  - 玩具守护者活动主页
- progress_check
  - 当前活动进度查看页面
- task
  - 活动详情页面

> 下期活动目录如产品无太大变动和本期活动目录结构保持一致

文件讲解

`active_config.ts` - 活动编号配置

模块或组件依赖关系：

全局组件依赖采用项目的 `Webpack alias` 详情参见项目根目录 `README.md` 文件

活动依赖则采用相对目录(本期活动和下期活动的依赖为完全相互独立的关系，玩具守护者活动的依赖则为玩具守护者活动独有不与 H5 其它功能页面页面混肴)

### 开发方式

开发依据：逻辑上讲，下期活动是以本期活动代码为基础的和本期活动无关的独立项目

`activity/next_active`目录下的就是下期活动的全部代码

本期活动和下期活动均为 `/activity` 的子路由

子路由的配置和切换逻辑参见参见 `src/pages/activity/index.tsx` 文件

地址填写需修改成当前的期数

### 部署方式

当开发完毕后在下期活动开始前直接部署即可。

> 在活动开始后，上述提到的服务端接口字段应变更掉，前端则根据该字段将子路由加载的文件全部替换掉，自动完成本期活动和下期活动的切换

当下期活动开始后，在下下期活动开始前，将本期活动代码从项目中移除，将下期活动代码移至本期代码处，则下期活动变为本期活动，以此类推。
